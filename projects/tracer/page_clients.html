<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TracerJD: Client Analyses of the TracerJD tracing framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">TracerJD: A Framework for Generic Trace-based Dynamic Dependence Analysis with Fine-grained Logging</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="page_clients">Client Analyses of the TracerJD tracing framework </a></h1><h2><a class="anchor" id="usage_clients">
How to use the example client analyses on TracerJD</a></h2>
<p>This page shows the usage of the three example client analyses built on the TracerJD tracing framework. All of these client analyses are included all for demonstrating how to use the fine-grained traces generated by the framework. The implementation of these client analyses also show how to develop applications on the framework mainly by using the dynamic dependence querying interface, which facilitates the applications' use of the underlying dependence traces.</p>
<p>(1) Application analyses built on the tracing framework - a backward dynamic slicer</p>
<ul>
<li>The following script illustrates how to run the backward dynamic slicer included in the toolkit that is developed to show to built a dependence-based client analysis of TracerJD</li>
<li>The 'sc.txt' file contains the slicing criterion, each row for an input , in a format of <br/>
"input_no.  statement_number_as_the_criterion" <br/>
 for example, <br/>
 1 121<br/>
 2 210<br/>
 ......<br/>
 <br/>
</li>
</ul>
<div class="fragment"><pre class="fragment">
ver=$1
seed=$2
NT=${3:-5} % number of inputs to use
INDIR=$subjectloc/tracerOutdyn-${ver}${seed}

MAINCP=".:libs/polyglot.jar:libs/sootclasses-2.3.0.jar:libs/jasminclasses-2.3.0.jar:libs/java_cup.jar:libs/LocalsBox.jar:$subjectloc/lib:libs/DUAForensics.jar:libs/InstrReporters.jar:libs/deam.jar:libs/Sensa.jar:libs/mcia.jar:TracerJD.jar:$subjectloc/lib"

starttime=`date +%s%N | cut -b1-13`
	#"main" \
java -Xmx10g -ea -cp ${MAINCP} apps.DynSlicer \
	"$INDIR" \
	$subjectloc/sc.txt \
	$NT \
	#-debug

stoptime=`date +%s%N | cut -b1-13`
echo "RunTime for ${ver}${seed} elapsed: " `expr $stoptime - $starttime` milliseconds

</pre></div><p>(2) Application analyses built on the tracing framework - a statement-level performance profiler</p>
<ul>
<li>The following script illustrates how to run the statement-level performance profiler that is developed as another example showing how to built a client analysis of TracerJD</li>
<li>The 'stmt.txt' file contains the statements for which performance is wanted to be profiled, simply each row giving one of such statements</li>
<li>In the results, each row will show the execution time taken by each instance of a statement</li>
</ul>
<div class="fragment"><pre class="fragment">
ver=$1
seed=$2
NT=${3:-5} % number of inputs to use
INDIR=$subjectloc/tracerOutdyn-${ver}${seed}

MAINCP=".:libs/polyglot.jar:libs/sootclasses-2.3.0.jar:libs/jasminclasses-2.3.0.jar:libs/java_cup.jar:libs/LocalsBox.jar:$subjectloc/lib:libs/DUAForensics.jar:libs/InstrReporters.jar:libs/deam.jar:libs/Sensa.jar:libs/mcia.jar:TracerJD.jar"

SOOTCP=".:libs/rt.jar:libs/polyglot.jar:libs/sootclasses-2.3.0.jar:libs/jasminclasses-2.3.0.jar:libs/java_cup.jar:libs/LocalsBox.jar:$subjectloc/lib:libs/DUAForensics.jar:libs/InstrReporters.jar:libs/deam.jar:libs/Sensa.jar:libs/mcia.jar:TracerJD.jar:$subjectloc/lib:$subjectloc/bin/${ver}${seed}"

### static analysis

OUTDIR=$subjectloc/tracerInstrumented-$ver$seed-prof

function phase1() {
	mkdir -p $OUTDIR
	mkdir -p $subjectloc/out-TracerInstr-prof

	starttime=`date +%s%N | cut -b1-13`
		#-debug \
		#-dumpJimple \
		#-wrapTryCatch \
		#-duaverbose \
		#-dumpFunctionList \
		#-debug \
	$JAVA -Xmx1600m -ea -cp ${MAINCP} profile.EventInstrumenter \
		-w -cp ${SOOTCP} \
		-p cg verbose:false,implicit-entry:false -p cg.spark verbose:false,on-fly-cg:true,rta:true \
		-f c -d "$OUTDIR" -brinstr:off -duainstr:off \
		-wrapTryCatch \
		-slicectxinsens \
		-stmtProf \
		-notracingval \
		-allowphantom \
		-staticCDInfo \
		-main-class ${DRIVERCLASS} -entry:${DRIVERCLASS} \
		-process-dir $subjectloc/bin/${ver}${seed}  \
		1&gt;$subjectloc/out-TracerInstr-prof/instr-${ver}${seed}.out 2&gt;$subjectloc/out-TracerInstr-prof/instr-${ver}${seed}.err
	stoptime=`date +%s%N | cut -b1-13`
	echo "StaticAnalysisTime for ${ver}${seed} elapsed: " `expr $stoptime - $starttime` milliseconds
}

### runtime tracing
MAINCP=".:libs/polyglot.jar:libs/sootclasses-2.3.0.jar:libs/jasminclasses-2.3.0.jar:libs/java_cup.jar:libs/LocalsBox.jar:$subjectloc/lib:libs/DUAForensics.jar:libs/InstrReporters.jar:libs/deam.jar:libs/Sensa.jar:libs/mcia.jar:TracerJD.jar:$subjectloc/lib:$OUTDIR"

function phase2() {
	starttime=`date +%s%N | cut -b1-13`
		#"-fullseq" 
	java -Xmx1600m -ea -cp ${MAINCP} trace.Runner \
		"$subjectloc" \
		${ver}${seed}-prof \
		$DRIVERCLASS \
		$NT \
		-stmtProf \
		5

	stoptime=`date +%s%N | cut -b1-13`
	echo "RunTime for ${ver}${seed} elapsed: " `expr $stoptime - $starttime` milliseconds
	#cp $OUTDIR/{varIds.out,staticCDInfo.dat,staticDDInfo.dat} $subjectloc/tracerOutdyn-${ver}${seed}-prof/
}

### trace analysis 

INDIR=$subjectloc/tracerOutdyn-${ver}${seed}-prof
function phase3() {
	starttime=`date +%s%N | cut -b1-13`
		#"main" \
	java -Xmx1g -ea -cp ${MAINCP} apps.StmtProf \
		"$INDIR" \
		$subjectloc/stmt.txt \
		$NT \
		-debug

	stoptime=`date +%s%N | cut -b1-13`
	echo "RunTime for ${ver}${seed} elapsed: " `expr $stoptime - $starttime` milliseconds
}

phase1
phase2
phase3

</pre></div><p>(3) Application analyses built on the tracing framework - a test coverage reporter</p>
<ul>
<li>The following script illustrates how to run the statement-level test coverage reporter that is developed as the final example showing how to built a client analysis of TracerJD</li>
</ul>
<div class="fragment"><pre class="fragment">
ver=$1
seed=$2
NT=${3:-5} % number of inputs to use
INDIR=$subjectloc/tracerOutdyn-${ver}${seed}

MAINCP=".:libs/polyglot.jar:libs/sootclasses-2.3.0.jar:libs/jasminclasses-2.3.0.jar:libs/java_cup.jar:libs/LocalsBox.jar:$subjectloc/lib:libs/DUAForensics.jar:libs/InstrReporters.jar:libs/deam.jar:libs/Sensa.jar:libs/mcia.jar:TracerJD.jar:$subjectloc/lib"

starttime=`date +%s%N | cut -b1-13`
	#"main" \
java -Xmx10g -ea -cp ${MAINCP} apps.StmtCov \
	"$INDIR" \
	$NT \
	#-debug

stoptime=`date +%s%N | cut -b1-13`
echo "RunTime for ${ver}${seed} elapsed: " `expr $stoptime - $starttime` milliseconds

</pre></div> </div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 3 Dec 2014 for TracerJD by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
